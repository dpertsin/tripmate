// const { GoogleGenerativeAI } = require("@google/generative-ai");

import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    // {
    //   role: "user",
    //   parts: [
    //     {
    //       text: "Generate a Travel Plan for Location: Athens, Greece, for 3 Days for Friends with a Moderate budget, Give me a Hotels options list with HotelName, Hotel address, Price, Hotel image URL, Geo Coordinates, rating, descriptions, and suggest itinerary with placeName, Place Details, Place image URL, Geo Coordinates, ticket Pricing, rating, Time to travel each of the locations for 3 days with each day plan with the best time to visit in JSON Format.",
    //     },
    //   ],
    // },
    // {
    //   role: "model",
    //   parts: [
    //     {
    //       text: '```json\n{\n  "tripDetails": {\n    "location": "Athens, Greece",\n    "duration": "3 Days",\n    "budget": "Moderate",\n    "bestTimeToVisit": "May-June or September-October (pleasant weather, fewer crowds)"\n  },\n  "hotels": [\n    {\n      "hotelName": "Hotel Plaka",\n      "hotelAddress": "Kapnikareou 7, Athens 105 56, Greece",\n      "price": "€100-€150/night",\n      "hotelImageURL": "https://example.com/hotel_plaka.jpg",\n      "geoCoordinates": {\n        "latitude": 37.9766,\n        "longitude": 23.7265\n      },\n      "rating": 4.5,\n      "description": "Charming hotel in the heart of Plaka, close to major attractions."\n    },\n    {\n      "hotelName": "Adrian Hotel",\n      "hotelAddress": "Adrianou 72, Athens 105 55, Greece",\n      "price": "€80-€120/night",\n      "hotelImageURL": "https://example.com/adrian_hotel.jpg",\n      "geoCoordinates": {\n        "latitude": 37.9758,\n        "longitude": 23.7286\n      },\n      "rating": 4.0,\n      "description": "Modern hotel near Monastiraki Square with rooftop views."\n    },\n    {\n      "hotelName": "Athens Backpackers",\n      "hotelAddress": "Makri 12, Athens 105 54, Greece",\n      "price": "€30-€50/night (dorm/private)",\n      "hotelImageURL": "https://example.com/athens_backpackers.jpg",\n      "geoCoordinates": {\n        "latitude": 37.9761,\n        "longitude": 23.7252\n      },\n      "rating": 4.2,\n      "description": "Budget-friendly hostel with social atmosphere, close to Acropolis."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "places": [\n        {\n          "placeName": "Acropolis",\n          "placeDetails": "Ancient citadel with Parthenon temple.",\n          "placeImageURL": "https://example.com/acropolis.jpg",\n          "geoCoordinates": {\n            "latitude": 37.9714,\n            "longitude": 23.7258\n          },\n          "ticketPricing": "€20",\n          "rating": 4.8,\n          "timeToTravel": "2-3 hours"\n        },\n        {\n          "placeName": "Acropolis Museum",\n          "placeDetails": "Museum showcasing artifacts from the Acropolis.",\n          "placeImageURL": "https://example.com/acropolis_museum.jpg",\n          "geoCoordinates": {\n             "latitude": 37.9695,\n             "longitude": 23.7281\n          },\n          "ticketPricing": "€5",\n          "rating": 4.6,\n          "timeToTravel": "1-2 hours"\n        },\n        {\n          "placeName": "Plaka District",\n          "placeDetails": "Historic neighborhood with charming streets and tavernas.",\n          "placeImageURL": "https://example.com/plaka.jpg",\n          "geoCoordinates": {\n             "latitude": 37.9761, \n             "longitude": 23.7272 \n          },\n          "ticketPricing": "Free (except for shops/restaurants)",\n          "rating": 4.7,\n          "timeToTravel": "2-3 hours (exploring)"\n        }\n      ]\n    },\n    "day2": {\n      "places": [\n        {\n          "placeName": "Ancient Agora",\n          "placeDetails": "Ruins of the ancient marketplace and civic center.",\n          "placeImageURL": "https://example.com/agora.jpg",\n          "geoCoordinates": {\n            "latitude": 37.9756,\n            "longitude": 23.7229\n          },\n          "ticketPricing": "€10",\n          "rating": 4.5,\n          "timeToTravel": "2-3 hours"\n        },\n         {\n          "placeName": "Temple of Hephaestus",\n          "placeDetails": "Well-preserved ancient Greek temple.",\n          "placeImageURL": "https://example.com/hephaestus.jpg",\n          "geoCoordinates": {\n            "latitude": 37.9753,\n            "longitude": 23.7234\n          },\n          "ticketPricing": "Included with Agora ticket",\n          "rating": 4.6,\n          "timeToTravel": "1 hour"\n        },\n        {\n          "placeName": "Monastiraki Flea Market",\n          "placeDetails": "Bustling market with souvenirs, antiques, and more.",\n          "placeImageURL": "https://example.com/monastiraki.jpg",\n          "geoCoordinates": {\n             "latitude": 37.9753,\n             "longitude": 23.7260 \n          },\n          "ticketPricing": "Free (except for purchases)",\n          "rating": 4.4,\n          "timeToTravel": "1-2 hours" \n        }\n      ]\n    },\n    "day3": {\n      "places": [\n        {\n          "placeName": "National Archaeological Museum",\n          "placeDetails": "Vast collection of Greek artifacts from prehistory to late antiquity.",\n          "placeImageURL": "https://example.com/national_museum.jpg",\n          "geoCoordinates": {\n            "latitude": 37.9978, \n            "longitude": 23.7294\n          },\n          "ticketPricing": "€10",\n          "rating": 4.7,\n          "timeToTravel": "2-3 hours"\n        },\n        {\n          "placeName": "National Garden",\n          "placeDetails": "Large park with botanical gardens and ancient ruins.",\n          "placeImageURL": "https://example.com/national_garden.jpg",\n          "geoCoordinates": {\n             "latitude": 37.9734,\n             "longitude": 23.7382 \n          },\n          "ticketPricing": "Free",\n          "rating": 4.4,\n          "timeToTravel": "1-2 hours" \n        },\n        {\n          "placeName": "Lycabettus Hill",\n          "placeDetails": "Highest point in Athens, offering panoramic views.",\n          "placeImageURL": "https://example.com/lycabettus.jpg",\n          "geoCoordinates": {\n            "latitude": 37.9823,\n            "longitude": 23.7466\n          },\n          "ticketPricing": "Funicular: €7.50 roundtrip",\n          "rating": 4.6,\n          "timeToTravel": "2-3 hours (including travel time)" \n        }\n      ]\n    }\n  }\n}\n```',
    //     },
    //   ],
    // },
    {
      role: "user",
      parts: [
        {
          text: "Generate a Travel Plan for Location: Athens, Greece, for 3 Days for Friends with a Moderate budget, Give me a description of the City with what this city is known for and what is one thing that the traveler shouldn't miss, Hotels options list with HotelName, Hotel address, Price, Hotel image URL, Geo Coordinates, rating, descriptions, and suggest itinerary with placeName, Place Details, Place image URL, Geo Coordinates, ticket Pricing, rating, Time to travel each of the locations for 3 days with each day plan with the best time to visit in JSON Format.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "cityDescription": {\n    "description": "Athens, the historical capital of Greece, is a vibrant city where ancient wonders seamlessly blend with modern life.  From the iconic Acropolis to bustling markets and charming tavernas, Athens offers a rich tapestry of history, culture, and captivating experiences.",\n    "knownFor": "Ancient ruins, classical architecture, Greek mythology, philosophy, delicious cuisine, and vibrant nightlife.",\n    "dontMiss": "Watching the sunset over the Acropolis from the Areopagus Hill – a truly magical experience."\n  },\n  "tripDetails": {\n    "location": "Athens, Greece",\n    "duration": "3 Days",\n    "budget": "Moderate",\n    "bestTimeToVisit": "May-June or September-October (pleasant weather, fewer crowds)"\n  },\n  "hotels": [\n    {\n      "hotelName": "Hotel Plaka",\n      "hotelAddress": "Kapnikareou 7, Athens 105 56, Greece",\n      "price": "€100-€150/night",\n      "hotelImageURL": "https://example.com/hotel_plaka.jpg", // Replace with actual image URLs\n      "geoCoordinates": { "latitude": 37.9766, "longitude": 23.7265 },\n      "rating": 4.5,\n      "description": "Charming hotel in the heart of Plaka, close to major attractions."\n    },\n    {\n      "hotelName": "Adrian Hotel",\n      "hotelAddress": "Adrianou 72, Athens 105 55, Greece",\n      "price": "€80-€120/night",\n      "hotelImageURL": "https://example.com/adrian_hotel.jpg",  // Replace with actual image URLs\n      "geoCoordinates": { "latitude": 37.9758, "longitude": 23.7286 },\n      "rating": 4.0,\n      "description": "Modern hotel near Monastiraki Square with rooftop views."\n    },\n    {\n      "hotelName": "Athens Backpackers",\n      "hotelAddress": "Makri 12, Athens 105 54, Greece",\n      "price": "€30-€50/night (dorm/private)",\n      "hotelImageURL": "https://example.com/athens_backpackers.jpg", // Replace with actual image URLs\n      "geoCoordinates": { "latitude": 37.9761, "longitude": 23.7252 },\n      "rating": 4.2,\n      "description": "Budget-friendly hostel with social atmosphere, close to Acropolis."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "places": [\n        {"placeName": "Acropolis", "placeDetails": "The iconic ancient citadel, home to the Parthenon and other historical structures.", "placeImageURL": "https://example.com/acropolis.jpg", "geoCoordinates": { "latitude": 37.9714, "longitude": 23.7258 }, "ticketPricing": "€20", "rating": 4.8, "timeToTravel": "2-3 hours"},\n        {"placeName": "Acropolis Museum", "placeDetails": "Houses artifacts found on the Acropolis, providing valuable context to the site.", "placeImageURL": "https://example.com/acropolis_museum.jpg", "geoCoordinates": { "latitude": 37.9695, "longitude": 23.7281 }, "ticketPricing": "€10", "rating": 4.6, "timeToTravel": "1-2 hours"},\n        {"placeName": "Plaka District", "placeDetails": "Wander through charming, narrow streets lined with shops, restaurants, and cafes. Enjoy traditional Greek cuisine.", "placeImageURL": "https://example.com/plaka.jpg", "geoCoordinates": { "latitude": 37.9761, "longitude": 23.7272 }, "ticketPricing": "Free (except for shops/restaurants)", "rating": 4.7, "timeToTravel": "2-3 hours (exploring)"}\n      ]\n    },\n    "day2": {\n      "places": [\n        {"placeName": "Ancient Agora", "placeDetails": "Explore the ruins of the ancient marketplace and the heart of Athenian democracy.", "placeImageURL": "https://example.com/agora.jpg", "geoCoordinates": { "latitude": 37.9756, "longitude": 23.7229 }, "ticketPricing": "€10", "rating": 4.5, "timeToTravel": "2-3 hours"},\n        {"placeName": "Temple of Hephaestus", "placeDetails": "One of the best-preserved ancient Greek temples, dedicated to the god of blacksmiths.", "placeImageURL": "https://example.com/hephaestus.jpg", "geoCoordinates": { "latitude": 37.9753, "longitude": 23.7234 }, "ticketPricing": "Included with Agora ticket", "rating": 4.6, "timeToTravel": "1 hour"},\n        {"placeName": "Monastiraki Flea Market", "placeDetails": "A vibrant market with souvenirs, antiques, and local goods – perfect for bargain hunting.", "placeImageURL": "https://example.com/monastiraki.jpg", "geoCoordinates": { "latitude": 37.9753, "longitude": 23.7260 }, "ticketPricing": "Free (except for purchases)", "rating": 4.4, "timeToTravel": "1-2 hours"}\n      ]\n    },\n    "day3": {\n      "places": [\n        {"placeName": "National Archaeological Museum", "placeDetails": "Home to an extensive collection of Greek artifacts spanning prehistory to late antiquity.", "placeImageURL": "https://example.com/national_museum.jpg", "geoCoordinates": { "latitude": 37.9978, "longitude": 23.7294 }, "ticketPricing": "€12", "rating": 4.7, "timeToTravel": "2-3 hours"},\n        {"placeName": "National Garden", "placeDetails": "Escape the city bustle in this tranquil green oasis with botanical gardens, hidden paths, and a small zoo.", "placeImageURL": "https://example.com/national_garden.jpg", "geoCoordinates": { "latitude": 37.9734, "longitude": 23.7382 }, "ticketPricing": "Free", "rating": 4.4, "timeToTravel": "1-2 hours"},\n        {"placeName": "Lycabettus Hill", "placeDetails": "Ascend to the highest point in Athens for breathtaking panoramic views of the city and surrounding area. Take the funicular or hike to the top.", "placeImageURL": "https://example.com/lycabettus.jpg", "geoCoordinates": { "latitude": 37.9823, "longitude": 23.7466 }, "ticketPricing": "Funicular: €7.50 roundtrip", "rating": 4.6, "timeToTravel": "2-3 hours (including travel time)"}\n      ]\n    }\n  }\n}\n```\n\n\nKey improvements:\n\n* **More descriptive text:**  The descriptions of the city and places to visit are more engaging and provide more context.\n* **Placeholder image URLs:**  I\'ve added placeholder image URLs so you know where to insert real image links.  Be sure to replace these placeholders.\n* **Consistent pricing:** Corrected the Acropolis Museum ticket price.\n* **Minor formatting:** Improved readability with spacing and consistency.\n\n\nRemember to replace the example image URLs with actual URLs for a better user experience.  You can also customize this further by adding more details about transportation options, restaurant recommendations, or evening activities.',
        },
      ],
    },
  ],
});
